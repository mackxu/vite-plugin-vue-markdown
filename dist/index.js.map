{"version":3,"sources":["../plugin/md.ts","../plugin/index.ts"],"sourcesContent":["import type { MarkdownPluginOptions } from './types';\n\nexport function transformMarkdown(options: MarkdownPluginOptions) {\n  const setupPromise = (async () => {\n    const { default: MarkdownIt } = await import('markdown-it-async');\n    const md = MarkdownIt({\n      async highlight(code, lang) {\n        const { codeToHtml } = await import('shiki');\n        return await codeToHtml(code, { lang, theme: options.theme || 'vitesse-dark' });\n      },\n    });\n    return md;\n  })();\n\n  return async (code: string) => {\n    const md = await setupPromise;\n    const html = await md.renderAsync(code);\n    return `<template>${html}</template>`;\n  };\n}\n","import type { Plugin } from 'vite';\nimport { transformMarkdown } from './md';\nimport type { MarkdownPluginOptions } from './types';\n\nexport function markdownPlugin(options: MarkdownPluginOptions = {}): Plugin {\n  const markdownToVue = transformMarkdown(options);\n\n  return {\n    name: 'vite:markdown',\n    enforce: 'pre',\n    async transform(code, id) {\n      if (!id.endsWith('.md')) {\n        return null;\n      }\n      try {\n        return await markdownToVue(code);\n      } catch (error: any) {\n        this.error(error);\n      }\n    },\n    handleHotUpdate(ctx) {\n      const { file, read } = ctx;\n      if (!file.endsWith('.md')) {\n        return;\n      }\n      ctx.read = async () => {\n        const code = await read();\n        return await markdownToVue(code);\n      };\n    },\n  };\n}\n"],"mappings":";AAEO,SAAS,kBAAkB,SAAgC;AAChE,QAAM,gBAAgB,YAAY;AAChC,UAAM,EAAE,SAAS,WAAW,IAAI,MAAM,OAAO,mBAAmB;AAChE,UAAM,KAAK,WAAW;AAAA,MACpB,MAAM,UAAU,MAAM,MAAM;AAC1B,cAAM,EAAE,WAAW,IAAI,MAAM,OAAO,OAAO;AAC3C,eAAO,MAAM,WAAW,MAAM,EAAE,MAAM,OAAO,QAAQ,SAAS,eAAe,CAAC;AAAA,MAChF;AAAA,IACF,CAAC;AACD,WAAO;AAAA,EACT,GAAG;AAEH,SAAO,OAAO,SAAiB;AAC7B,UAAM,KAAK,MAAM;AACjB,UAAM,OAAO,MAAM,GAAG,YAAY,IAAI;AACtC,WAAO,aAAa,IAAI;AAAA,EAC1B;AACF;;;ACfO,SAAS,eAAe,UAAiC,CAAC,GAAW;AAC1E,QAAM,gBAAgB,kBAAkB,OAAO;AAE/C,SAAO;AAAA,IACL,MAAM;AAAA,IACN,SAAS;AAAA,IACT,MAAM,UAAU,MAAM,IAAI;AACxB,UAAI,CAAC,GAAG,SAAS,KAAK,GAAG;AACvB,eAAO;AAAA,MACT;AACA,UAAI;AACF,eAAO,MAAM,cAAc,IAAI;AAAA,MACjC,SAAS,OAAY;AACnB,aAAK,MAAM,KAAK;AAAA,MAClB;AAAA,IACF;AAAA,IACA,gBAAgB,KAAK;AACnB,YAAM,EAAE,MAAM,KAAK,IAAI;AACvB,UAAI,CAAC,KAAK,SAAS,KAAK,GAAG;AACzB;AAAA,MACF;AACA,UAAI,OAAO,YAAY;AACrB,cAAM,OAAO,MAAM,KAAK;AACxB,eAAO,MAAM,cAAc,IAAI;AAAA,MACjC;AAAA,IACF;AAAA,EACF;AACF;","names":[]}